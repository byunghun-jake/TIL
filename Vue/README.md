[TOC]



## JWT

### ??? ? JWT ????

??? ? Token? ???? ?? ? ???? ??? ??

Token? ? ???? ??? ????.

![image-20210715221115773](README.assets/image-20210715221115773.png)

> ????? 201 status code? ??? ? ??.

???? ??? ????? ?? ???. ?? ?? ???? ????? ?????.

![image-20210715221217664](README.assets/image-20210715221217664.png)

??! ???? ???? ??? ??? ????. ???? ????? ?? ??? ??? ? ???? ?? ? ?? ?????? ??? ???.





### JWT ??? ??

Front?? ??? ??, ??? ???? ???? ??? ????? ??. ??? ???? 401??? ????, ???? ??? ???? ??????.

![image-20210715215600974](README.assets/image-20210715215600974.png)

401???? ?? ?? ??? ??? ?? ???? ????, ?? ?? ??? ??? ?????. ??? ???? ???? ??? AuthController.java ? ??? ??? ???.



```java
@GetMapping("/valiable")
    public ResponseEntity<Map<String, Object>> valiable(HttpServletRequest request) {
        Map<String, Object> resultMap = new HashMap<>();
        HttpStatus status = HttpStatus.OK;

        if (jwtService.isUsable(request.getHeader("access-token"))) {
            logger.info("?? ??? ??!!!");
        } else {
        	status = HttpStatus.UNAUTHORIZED;
            logger.error("?? ??? ??!!!");
        }
        return new ResponseEntity<Map<String, Object>>(resultMap, status);
    }
```

??? ????? ??? ??? ????. ?? Header? `Authorization`??? ???? ?? ?? ??????, ?????? `access-token`??? ???? ?? ?? ????.

?? ??? ? ?? ??? ??? ?? ?? ?? ????, ?????? ????? Header?? Key? ??? Value? ???? ??? ???? ??? ??? ??? ?? ?????.

> ??? ??? ?? ????? ??? ??????? ???? ??? ??? ???.
>
> ```
> 2021-07-15 21:52:19.642 ERROR 2308 --- [nio-8080-exec-1] c.ssafy.sub1.api.service.JwtServiceImpl  : JWT String argument cannot be null or empty.
> 2021-07-15 21:52:19.643 ERROR 2308 --- [nio-8080-exec-1] c.ssafy.sub1.api.service.JwtServiceImpl  : ?? ??? ??!!!
> ```
>
> JWT String?? ???? ?? ????? ???? ??



```java
@GetMapping("/valiable")
public ResponseEntity<Map<String, Object>> valiable(HttpServletRequest request) 	{
    Map<String, Object> resultMap = new HashMap<>();
    HttpStatus status = HttpStatus.OK;

    if (jwtService.isUsable(request.getHeader("accessToken"))) {
        logger.info("?? ??? ??!!!");
    } else {
        status = HttpStatus.UNAUTHORIZED;
        logger.error("?? ??? ??!!!");
    }
    return new ResponseEntity<Map<String, Object>>(resultMap, status);
}
```

> access-token  > Authorization



?? ??? ?? ??!

![image-20210715221745366](README.assets/image-20210715221745366.png)

> Token ??? ??? ???? ?, Unauthorized??...



??? ??? ?????.

```
2021-07-15 22:16:55.561 ERROR 2308 --- [nio-8080-exec-3] c.ssafy.sub1.api.service.JwtServiceImpl  : Unable to read JSON value: ?z??&?r#?$?3#Sb
2021-07-15 22:16:55.561 ERROR 2308 --- [nio-8080-exec-3] c.ssafy.sub1.api.service.JwtServiceImpl  : ?? ??? ??!!!
```

> Unable to read JSON value???



?? ???? ??????, [???](https://codeinlife.tistory.com/47)?? ?? ?? ? ???.

> ??: ???? ??? ???? ???? ?? ? ????. Bearer JWT ??? ???? ??? Bearer? ??? ?? ???? ???? ?? ??.



Authorization ???? ??? ?? ?, Bearer ?? ??? ???.

```javascript
export const requestCheckToken = async ({ state }) => {
  console.log("requestCheckToken", state)
  const url = "/auth/valiable"
  return axios.get(url, {
    headers: {
      Authorization: state.token,
      // Authorization: `Bearer ${state.token}`,
    },
  })
}
```





![image-20210715222427077](README.assets/image-20210715222427077.png)

??? ???? ?? ??!



## ??



### Modal ??!

??? ?? ??? ??? ?? ?? ?, ??? ?? ??? ???? ?? ?? ?? ?? ?? ?? ?? ? ??? ??? ??? ??? ?? ???

![image-20210722173912674](README.assets/image-20210722173912674.png)

#### ?? ??

```vue
<template>
    <div>
        <button @click="modalOpen = true">openModal</button>
    </div>
    <div class="backdrop" v-if="modalOpen" @click="modalOpen = false">
        <div class="modal-container">?? ??</div>
    </div>
</template>
```



#### closeModal #1

> backdrop? ???? ?, modal? ??? ???.

```vue
<template>
  <div>
    <button @click="modalOpen = true">openModal</button>
  </div>
  <div class="backdrop" v-if="modalOpen" @click="modalOpen = false">
    <div class="modal-container">??? ???? ???? ??.</div>
  </div>
</template>
```

![Honeycam 2021-07-22 17-41-19](README.assets/Honeycam 2021-07-22 17-41-19.gif)

> ?? ?? ??? ???? ??? ???.



Vue Event Modifier ? `.self` ? ???? ?, `.self`? ???? ??? ??? ???? ??? ??? ???? ???? ??? ???.

`backdrop`? ?? ???? ?????, `backdrop` ??? `modal-container` ?? ??? ?? ???? ?? ??? ??? ? ???? `.self`? ???? ? ??? ??? ? ?? ???? ????.

#### closeModal #2

> .self ??

<video src="README.assets/Honeycam 2021-07-22 17-51-30.webm"></video>

??? ?? ??? ????!



## Vue Event handler



### Modifier

Vue?? ???? ?? ??? ???

- `.stop`
- `.prevent`
- `.capture`
- `.self`
- `.once`
- `.passive`



?? ?? ??? ? ?? prevent? self? ?????



#### `.prevent`

???? ???? ?, ???? ?? ??? ???? ??? ???.

??

- form tag? submit ???

  form tag?? submit ???? ????, ??? ?? ??? ?????.

  1. form tag? ??? action, method? ?? ??? ?? ??? form ??? ??? ???? ????.

     ```html
     <form action="???? ??? ??" method="???? ??? ??">
         ?? ???
     </form>
     ```

  form? ?? ??? single Page Application? ???? ? ?? ??? ???. (??? ??? ??? ???? ???)

  ??? ?? ???? ???? ?? ??? ???? ??? ?? ???, vue??? ??? ?? ??? ? ????.

  ```vue
  <script>
  	export default {
        	setup() {
              const onSubmit = (e) => {
                  e.preventDefault()
                  // ?? ?? ??
              }
          }
      }
  </script>
  ```

  ?? ?? ??? ? ???, Event Modifier? ???? ??? ?? ??? ? ????.

  ```vue
  <template>
  	<form @submit.prevent = "onSubmit">
          <!-- ? ?? -->
      </form>
  </template>
  ```

  

#### `.self`

???? ??? ??? ?? ???? ??? ??? ?? ??? ???? ?????.

```vue
<template>
  <div class="button-wrapper" @click="parentOnClick">
    <p>?? ??</p>
    <button @click="childOnClick">?? ??</button>
  </div>
</template>
<script>
export default {
    methods: {
      parentOnClick() {
        alert("?? ??? ???????");
      },
      childOnClick() {
        alert("?? ??? ???????");
      }
    }
}
</script>
```

![image-20210722180957540](README.assets/image-20210722180957540.png)



?? ??? ?? ??? ?? ???? ?,

<video src="README.assets/Honeycam 2021-07-22 18-11-06.webm"></video>



?? ??? ?????, ?? ??? ???? ???? ??? ??? ??? ??? ?? ????? ?? ???? ???? ???.

`click.self`? ????, ???? ??? ???? ???? ???? ???? ??? ?? ??? ??? ? ??.

> ?? ???? .self ???? ???? ????.

```vue
<template>
  <div class="button-wrapper" @click.self="parentOnClick">
    <p>?? ??</p>
    <button @click="childOnClick">?? ??</button>
  </div>
</template>
```

<video src="README.assets/Honeycam 2021-07-22 18-14-48.webm"></video>



### Click vs MouseDown

click ???? ?? ??? ????, ???? ??? ??? ????? ????? ???? ?? ?? close ???? ????.

?? ??? ?? ??? ?? ??? mousedown ???? ???? ??? ????? ???? ?? ?? ??? ?? ? ??.



## Vue Router

### Lazy Loading Routes

JavaScript ?? ???? ??? ?? ?? Route? ???? ?, ????? Import ??? ??

> When building apps with a bundler, the JavaScript bundle can become quite large, and thus affect the page load time. It would be more efficient if we can split each route's components into a separate chunks, and only load them when the route is visited.
>
> [Vue ????](https://next.router.vuejs.org/guide/advanced/lazy-loading.html#lazy-loading-routes)



### Page Not Found (??? ???? ???? ???? ?? ?)

```js
// router/index.js

const routes = [
	// ...
    {
        path: "/:catchAll(.*)",
        name: "NotFound",
        component: NotFound,
    }
]
```

path?? ?? ??? ???? ? ?? Dynamic Routing? ????, ?? ?? route?? ???? ?? ??? ????.



### ???? ??

```vue
<script>
	import {useRouter} from "vue-router"
    export default {
        setup() {
            const router = useRouter()
            const back = () => {
                router.go(-1)
            }
        }
    }
</script>
```



## vue.config.js



### devServer

> development ???? ??? ???? ?? ?? ?? ??? ?? Object



#### devServer.https

> ????? dev-server? HTTP ???? ????. ? ??? ?? HTTP/2 (HTTPS) ???? ????? ? ? ??.

```js
module.exports = {
    //...
    devServer: {
        // https: false,
        https: true,
    }
}
```



https ?? ?

![image-20210728100317120](README.assets/image-20210728100317120.png)

https ?? ?

![image-20210728095130049](README.assets/image-20210728095130049.png)

![image-20210728100221788](README.assets/image-20210728100221788.png)



#### devServer.open

> ??? ???? ? ?, ???? ?? ???? ???(??? ?? ??? ????) ?? ??

```js
module.exports = {
    //...
    devServer: {
        // open: false
        open: true,
    }
}
```



#### devServer.port

> ?? ?? ??? ???? ??

```js
module.exports = {
    //...
    devServer: {
        port: 8888,
    }
}
```

![image-20210728101034576](README.assets/image-20210728101034576.png)



#### devServer.proxy

> ??? ??? ???? ??, ?? ???(`/api/v1`)? ?? API ??? ???? ??? ???? ???? ?? ??? ? ??.

```
??? ??: http://localhost:3000
????? ??: http://localhost:8080
API ?? ???
	/api/v1
```

```js
module.exports = {
    //...
    devServer: {
        proxy: {
            '/api/v1': {
                target: "http://localhost:3000",
            },
        }
    }
}
```



```vue
<script>
//...
export default {
    //...
    setup() {
        const notifications = ref([])
        const getNotifications = async() => {
            const res = await axios({
                url: "/api/v1/notifications",
            })
        }
    }
}
</script>
```



![image-20210728102554379](README.assets/image-20210728102554379.png)



# TypeScript



## ?? ?? ??



### ?? ????? ???? ????? ?? ????

```javascript
const myFunc = ({ name, age }) => {
    // ...
}
```

```typescript
const myFunc = ({ name, age }: { name: string, age: number }) => {
    // ...
}
```

[?? ??](https://leehyungi0622.github.io/2021/04/24/202104/210424-Typescript_TIL-1/)



## snake_case <=> camelCase



### case ?? ?? ??

```typescript
const isArray = (a: any) => Array.isArray(a)
const isObject = (o: any) =>
  o === Object(o) && !Array.isArray(o) && typeof o !== 'function'

const toCamel = (s: string) => {
  return s.replace(/([-_][a-z])/gi, ($1) => {
    return $1.toUpperCase().replace('-', '').replace('_', '')
  })
}

const to_snake = (s: string) => {
  return s.replace(/([A-Z])/g, ($1) => {
    return `_${$1.toUpperCase()}`
  })
}

export const keysToCamel = (o: any) => {
  if (isObject(o)) {
    const n: Obj = {}

    Object.keys(o).forEach((k) => {
      n[toCamel(k)] = keysToCamel(o[k])
    })

    return n
  } else if (isArray(o)) {
    return o.map((i: any) => {
      return keysToCamel(i)
    })
  }

  return o
}

export const keys_to_snake = (o: any) => {
  if (isObject(o)) {
    const n: Obj = {}

    Object.keys(o).forEach((k) => {
      n[to_snake(k)] = keys_to_snake(o[k])
    })

    return n
  } else if (isArray(o)) {
    return o.map((i: any) => {
      return keys_to_snake(i)
    })
  }

  return o
}
```



#### TODO: ?? ????

??? ??? ???? ?? ??? ??????, ??? ???? ???? ??



# Vuex



## Token



### 1. Vuex? ?? ??? Axios ??? ????

> interceptor? ???? ??? ??? ? ???,
>
> ??? ??? ?? refreshToken? ???? ???? ??? ????

```
/src
  /api
    http.ts
  /store
    /modules
      auth.ts
    index.ts
```



#### http.ts

```typescript
import store from "@/store"
import axios from "axios"

const http = axios.create({
    baseUrl: 'http://localhost:8000',
})

http.interceptors.request.use((config) => {
    const accessToken = store.getters['auth/getToken']
    if (accessToken) {
        config.headers["Authrization"] = `Bearer ${accessToken}`
    }
    return config
})

export default http
```



#### auth.ts

```typescript
import http from "@/api/http"
import { Module } from "vuex"
import { RootState } from "@/store/index"

interface authModule {
    accessToken: string
    // ...
}

export const auth: Module<authModule, RootState> = {
    namespaced: true,
    state: {
        accessToken: '',
        // ...
    },
    getters: {
        getToken(state) {
            return state.accessToken
        },
        // ...
    }
    // ...
}

```

